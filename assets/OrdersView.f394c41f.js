import{_ as O,W as b,r as C,e as D,F as a,G as l,H as t,I as i,J as f,K as g,bc as x,Z as v,$ as y,X as w,M as B,N as P,a0 as r,a1 as q,O as A}from"./index.23b0ca4b.js";import{_ as E}from"./Space.b3dc3fef.js";import{_ as F}from"./Pagination.a76b6872.js";import{_ as L,a as M}from"./Table.1da3a8a5.js";import{_ as $}from"./Button.9d89bb21.js";import"./use-rtl.c1e91907.js";import"./Input.296a4134.js";import"./Scrollbar.0bb5a8ce.js";import"./toString.0179cbee.js";import"./delegate.d660cb22.js";import"./FadeInExpandTransition.76abbc7b.js";import"./Popover.7437eb70.js";import"./keep.76d496a2.js";import"./Tag.528c576f.js";import"./upperFirst.0a0eecce.js";const I=c=>(B("data-v-11090213"),c=c(),P(),c),z=I(()=>t("h1",null,"\u8A02\u55AE\u7BA1\u7406",-1)),G={class:"container"},H={class:"ordersbox"},J=I(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"\u65E5\u671F"),t("th",null,"\u4F7F\u7528\u8005"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1"),t("th",null,"\u522A\u9664")])],-1)),K=A("\u522A\u9664"),T={__name:"OrdersView",setup(c){const h=b([]),_=C(1),u=5,p=D(()=>h.slice(_.value*u-u,_.value*u)),S=async s=>{const o=p.value.findIndex(e=>e._id===s);try{await x.delete("/orders/"+s),v.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),p.value.splice(o,1)}catch(e){v.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return(async()=>{try{const{data:s}=await x.get("/orders/all");h.push(...s.result.map(o=>(o.totalPrice=o.products.reduce((e,d)=>e+d.product.price*d.quantity,0),o)))}catch(s){console.log(s),v.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(s,o)=>{const e=L,d=$,V=M,k=E,N=F;return a(),l(g,null,[z,t("div",G,[t("div",H,[i(e),t("div",null,[i(k,{vertical:""},{default:f(()=>[i(V,{striped:""},{default:f(()=>[J,t("tbody",null,[(a(!0),l(g,null,y(w(p),n=>(a(),l(g,null,[w(p).length>0?(a(),l("tr",{key:n._id},[t("td",null,r(n._id),1),t("td",null,r(new Date(n.date).toLocaleDateString()),1),t("td",null,r(n.user.account),1),t("td",null,r(n.totalPrice),1),t("td",null,[t("ul",null,[(a(!0),l(g,null,y(n.products,m=>(a(),l("li",{key:m._id},r(m.product.name)+" x "+r(m.quantity),1))),128))])]),t("td",null,[i(d,{type:"error",onClick:m=>S(n._id)},{default:f(()=>[K]),_:2},1032,["onClick"])])])):q("",!0)],64))),256))])]),_:1})]),_:1})]),i(N,{page:_.value,"onUpdate:page":o[0]||(o[0]=n=>_.value=n),"page-count":Math.ceil(h.length/u)},null,8,["page","page-count"])])])],64)}}},it=O(T,[["__scopeId","data-v-11090213"]]);export{it as default};
