import{_ as O,W as C,r as D,e as B,F as r,G as a,H as t,I as i,J as h,K as g,aN as y,Z as f,$ as x,X as b,M as P,N as q,a0 as l,a1 as A,O as E}from"./index.c7164d39.js";import{_ as F}from"./Space.1668ef72.js";import{_ as L}from"./Pagination.a4e89120.js";import{_ as M,a as $}from"./Table.290d1e3d.js";import{_ as z}from"./Button.1feb4102.js";import"./use-rtl.7cada67b.js";import"./Input.a124a44e.js";import"./Scrollbar.c69640d2.js";import"./delegate.64eb1156.js";import"./FadeInExpandTransition.6f54bce6.js";import"./Popover.6bd0b042.js";import"./index.aa3a84e7.js";import"./index.d62e03b3.js";import"./toString.935b6664.js";import"./get.63d948e6.js";import"./keep.76d496a2.js";import"./Tag.3d327440.js";import"./Close.6136751c.js";import"./index.20db2190.js";import"./upperFirst.21c61fe8.js";const w=c=>(P("data-v-bbf6444e"),c=c(),q(),c),G=w(()=>t("h1",null,"\u8A02\u55AE\u7BA1\u7406",-1)),H={class:"container"},J={class:"ordersbox"},K=w(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"\u65E5\u671F"),t("th",null,"\u4F7F\u7528\u8005"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1"),t("th",null,"\u522A\u9664")])],-1)),T=E("\u522A\u9664"),U={__name:"OrdersView",setup(c){const _=C([]),u=D(1),p=5,v=B(()=>_.slice(u.value*p-p,u.value*p)),S=async(s,n)=>{try{await y.delete("/orders/"+s),f.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),_.splice(n,1)}catch(o){f.fire({icon:"error",title:"\u5931\u6557",text:o.isAxiosError?o.response.data.message:o.message})}};return(async()=>{try{const{data:s}=await y.get("/orders/all");_.push(...s.result.map(n=>(n.totalPrice=n.products.reduce((o,d)=>o+d.product.price*d.quantity,0),n)))}catch(s){console.log(s),f.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(s,n)=>{const o=M,d=z,V=$,k=F,I=L;return r(),a(g,null,[G,t("div",H,[t("div",J,[i(o),t("div",null,[i(k,{vertical:""},{default:h(()=>[i(V,{striped:""},{default:h(()=>[K,t("tbody",null,[(r(!0),a(g,null,x(b(v),(e,N)=>(r(),a(g,null,[b(v).length>0?(r(),a("tr",{key:e._id},[t("td",null,l(e._id),1),t("td",null,l(new Date(e.date).toLocaleDateString()),1),t("td",null,l(e.user.account),1),t("td",null,l(e.totalPrice),1),t("td",null,[t("ul",null,[(r(!0),a(g,null,x(e.products,m=>(r(),a("li",{key:m._id},l(m.product.name)+" x "+l(m.quantity),1))),128))])]),t("td",null,[i(d,{type:"error",onClick:m=>S(e._id,N)},{default:h(()=>[T]),_:2},1032,["onClick"])])])):A("",!0)],64))),256))])]),_:1})]),_:1})]),i(I,{page:u.value,"onUpdate:page":n[0]||(n[0]=e=>u.value=e),"page-count":Math.ceil(_.length/p)},null,8,["page","page-count"])])])],64)}}},mt=O(U,[["__scopeId","data-v-bbf6444e"]]);export{mt as default};
