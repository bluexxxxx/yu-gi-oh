import{_ as k,W as I,F as l,G as a,H as t,I as d,J as m,K as p,aN as f,Z as h,$ as g,M as N,N as S,a0 as c,a1 as C,O as D}from"./index.ecaef8db.js";import{_ as O}from"./Space.b7474915.js";import{_ as b,a as B}from"./Table.4ba23dbf.js";import{_ as q}from"./Button.09ae6154.js";import"./use-rtl.ee97bda6.js";import"./FadeInExpandTransition.3006eba6.js";const y=r=>(N("data-v-91ce5e06"),r=r(),S(),r),A=y(()=>t("h1",null,"\u8A02\u55AE\u7BA1\u7406",-1)),E={class:"container"},F={class:"ordersbox"},L=y(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"\u65E5\u671F"),t("th",null,"\u4F7F\u7528\u8005"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1"),t("th",null,"\u522A\u9664")])],-1)),P=D("\u522A\u9664"),$={__name:"OrdersView",setup(r){const _=I([]),x=async(s,o)=>{try{await f.delete("/orders/"+s),h.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),_.splice(o,1)}catch(e){h.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return(async()=>{try{const{data:s}=await f.get("/orders/all");_.push(...s.result.map(o=>(o.totalPrice=o.products.reduce((e,i)=>e+i.product.price*i.quantity,0),o)))}catch(s){console.log(s),h.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(s,o)=>{const e=b,i=q,v=B,w=O;return l(),a(p,null,[A,t("div",E,[t("div",F,[d(e),t("div",null,[d(w,{vertical:""},{default:m(()=>[d(v,{striped:""},{default:m(()=>[L,t("tbody",null,[(l(!0),a(p,null,g(_,(n,V)=>(l(),a(p,null,[_.length>0?(l(),a("tr",{key:n._id},[t("td",null,c(n._id),1),t("td",null,c(new Date(n.date).toLocaleDateString()),1),t("td",null,c(n.user.account),1),t("td",null,c(n.totalPrice),1),t("td",null,[t("ul",null,[(l(!0),a(p,null,g(n.products,u=>(l(),a("li",{key:u._id},c(u.product.name)+" x "+c(u.quantity),1))),128))])]),t("td",null,[d(i,{type:"error",onClick:u=>x(n._id,V)},{default:m(()=>[P]),_:2},1032,["onClick"])])])):C("",!0)],64))),256))])]),_:1})]),_:1})])])])],64)}}},Z=k($,[["__scopeId","data-v-91ce5e06"]]);export{Z as default};
